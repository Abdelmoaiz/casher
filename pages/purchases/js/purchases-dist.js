let tmp,mydataPro,title=document.querySelector("#title"),count=document.querySelector("#count"),priceBuy=document.querySelector("#price-buy"),priceSale=document.querySelector("#price-sale"),quantity=document.querySelector("#quantity"),price=document.querySelector("#price"),create=document.querySelector("#create"),totalBuy=document.querySelector("#total"),gainTrading=document.querySelector("#gain-trading"),gainNormal=document.querySelector("#gain-normal"),quanTotal=document.querySelector("#quan-total"),mood="create";function getTotal(){let t=+count.value*+priceBuy.value;totalBuy.innerHTML=t;let e=+count.value*+priceSale.value;gainTrading.innerHTML=+e-+t;let a=+count.value*+quantity.value*+price.value;gainNormal.innerHTML=a;let o=+count.value*+quantity.value;quanTotal.innerHTML=o}function creatProduct(){if(""!=title.value&&""!=count.value&&""!=priceBuy.value){let t={title:title.value,count:+count.value,totalQu:+count.value*+quantity.value,priceBuy:+priceBuy.value,priceSale:+priceSale.value,quantity:+quantity.value,price:+price.value};"create"===mood?mydataPro.push(t):"update"===mood?(mydataPro[tmp]=t,create.innerHTML="create"):"add"===mood&&(console.log(mydataPro[tmp].count),console.log(mydataPro[tmp].totalQu),mydataPro[tmp].count+=+t.count,mydataPro[tmp].totalQu+=+t.count*+t.quantity,console.log(mydataPro[tmp].count),console.log(mydataPro[tmp].totalQu),create.innerHTML="create")}localStorage.setItem("myData",JSON.stringify(mydataPro)),showData(),clearInput()}function clearInput(){title.value=count.value=priceBuy.value=priceSale.value=quantity.value=quanTotal.innerHTML=price.value=totalBuy.innerHTML=gainTrading.innerHTML=gainNormal.innerHTML=""}function showData(){let t="";for(let e=0;e<mydataPro.length;e++)t+=`\n            <tr>\n                <td>${e+1}</td>\n                <td>${mydataPro[e].title}</td>\n                <td>${mydataPro[e].totalQu}</td>\n                <td>${mydataPro[e].priceBuy}</td>\n                <td>${mydataPro[e].priceSale}</td>\n                <td>${mydataPro[e].price}</td>\n                <td><button onclick="addPro(${e});">Add</button></td>\n                <td><button onclick="updateData(${e});">Update</button></td>\n                <td><button onclick="deleteData(${e});">Delete</button></td>\n            </tr>\n        `;document.querySelector(".tbody").innerHTML=t}function updateData(t){title.value=mydataPro[t].title,count.value=mydataPro[t].count,priceBuy.value=mydataPro[t].priceBuy,priceSale.value=mydataPro[t].priceSale,quantity.value=mydataPro[t].quantity,price.value=mydataPro[t].price,title.focus(),scroll({top:0,behavior:"smooth"}),create.innerHTML="Update",mood="update",tmp=t,getTotal()}function addPro(t){title.value=mydataPro[t].title,title.setAttribute("readonly","readonly"),mydataPro[t].count+=+count.value,priceBuy.value=mydataPro[t].priceBuy,priceBuy.setAttribute("readonly","readonly"),priceSale.value=mydataPro[t].priceSale,priceSale.setAttribute("readonly","readonly"),quantity.value=mydataPro[t].quantity,quantity.setAttribute("readonly","readonly"),price.value=mydataPro[t].price,price.setAttribute("readonly","readonly"),count.focus(),create.innerHTML="Add Data",mood="add",console.log(mood),tmp=t}function deleteData(t){mydataPro.splice(t,1),localStorage.setItem("myData",JSON.stringify(mydataPro)),showData()}function clearProdact(){for(let t=0;t<mydataPro.length;t++)mydataPro[t].totalQu<1&&(mydataPro.splice(t,1),localStorage.setItem("myData",JSON.stringify(mydataPro)),showData())}function refresh(){window.location.reload()}mydataPro=null!=localStorage.myData?JSON.parse(localStorage.myData):[],showData(),clearProdact();